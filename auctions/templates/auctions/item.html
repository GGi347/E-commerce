{% extends 'auctions/layout.html' %} 

{% block body %} 
    <div class="page-container">
        {% if messages %}
            <ul class="messages">
            {% for message in messages %}
                <li class="{{ message.tags }}">{{ message }}</li>
            {% endfor %}
            </ul>
        {% endif %}
        <h2 class="page-header">Listing: {{ item.name }}</h2>
        {% if user.is_authenticated %}
            {% if item in watch_item %} 
            <a href="{% url 'watchlist' item.id %}">Remove from Watchlist</a>
            {% else %}
            <a href="{% url 'watchlist' item.id %}">Add to watchlist</a>
            {% endif %}
        {% endif %}
        <div>
            {% if item.imageUrl %}
            <img src="{{ item.imageUrl }}" alt="Image"  class="item-img" onerror="this.onerror=null;this.src='https://st2.depositphotos.com/2102215/46681/v/450/depositphotos_466819550-stock-illustration-image-available-icon-missing-image.jpg;'">
            {% else %} 
            <img src="https://st2.depositphotos.com/2102215/46681/v/450/depositphotos_466819550-stock-illustration-image-available-icon-missing-image.jpg" alt=""  class="item-img">
            {% endif %}
        </div>       

        <p class="item-detail">{{ item.description }}</p>
        <p>{{ item.price }}</p>
        <p>{{ item.createdDate }}</p>
        <p>{{ item.owner }}</p>

        {% if user.is_authenticated %}
            <span>{{ bids }} people have placed their bids so far.</span>
            <form action="{% url 'place-bid' item.id %}", method="post">
                {% csrf_token  %}
                <input type="number" name="bid-amount" id="bid-amount" placeholder="Bid">
                <input type="submit" value="Place Bid">
            </form>
        {% endif %}

    </div>
{% endblock %} 
